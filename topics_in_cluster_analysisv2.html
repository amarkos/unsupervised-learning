<!DOCTYPE html>
<html lang="en"><head>
<script src="Napola_files/libs/clipboard/clipboard.min.js"></script>
<script src="Napola_files/libs/quarto-html/tabby.min.js"></script>
<script src="Napola_files/libs/quarto-html/popper.min.js"></script>
<script src="Napola_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="Napola_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Napola_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="Napola_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.2.267">

  <meta name="author" content="Angelos Markos  Erasmus+ BIP - Advanced Analytics for Data Science  September 13, 2023 @ Naples ¶ ">
  <title>Topics in Cluster Analysis</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="Napola_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="Napola_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="Napola_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="Napola_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="Napola_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="Napola_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="Napola_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="Napola_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="Napola_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  
  <script src="Napola_files/libs/kePrint-0.0.1/kePrint.js"></script>
  <link href="Napola_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" rel="stylesheet">
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="quarto-title-block center">
  <h1 class="title">Topics in Cluster Analysis</h1>
  <p class="subtitle"><span style="font-size: 0.9em"><em>The Revenge of the Distances and other stories</em> ¶ </span></p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
<span style="font-size: 0.6em"><strong>Angelos Markos</strong> <br>Erasmus+ BIP - Advanced Analytics for Data Science <br>September 13, 2023 @ Naples ¶  
</span></div>
</div>
</div>

</section>
<section class="slide level2">

<h4 id="learning-objectives">Learning Objectives</h4>
<div style="font-size: 0.7em">
<div>
<ul>
<li class="fragment"><p>Critically assess the advantages, limitations, and best-use cases of the major clustering algorithms: K-means, K-medoids, Gaussian Mixture Model, DBSCAN, and Hierarchical Clustering, through both theoretical analysis and practical application on sample datasets.</p></li>
<li class="fragment"><p>Analyze and apply a range of similarity and dissimilarity measures to optimize the performance of clustering algorithms on different types of data.</p></li>
<li class="fragment"><p>Recognize and address the computational and methodological challenges in clustering datasets with categorical and mixed-type variables, and propose suitable preprocessing and algorithmic adaptations.</p></li>
</ul>
</div>
</div>
</section>
<section class="slide level2">

<h4 id="k-means-and-beyond-clustering-margarita-recipes">K-means and Beyond (Clustering Margarita Recipes)</h4>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="images/margarita.jpeg"></p>
</div><div class="column" style="width:60%;">
<div style="font-size: 0.6em">
<div class="fragment">
<div class="cell fig-column-margin">
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>76 signature Margarita recipes crafted with 10 ingredients or fewer (values are in ml).</caption>
 <thead>
  <tr>
   <th style="text-align:right;"> tequila </th>
   <th style="text-align:right;"> lime_juice </th>
   <th style="text-align:right;"> lemon_juice </th>
   <th style="text-align:right;"> orange_liqueur </th>
   <th style="text-align:right;"> simple_syrup </th>
   <th style="text-align:right;"> agave_nectar </th>
   <th style="text-align:right;"> water </th>
   <th style="text-align:right;"> sugar </th>
   <th style="text-align:right;"> mezcal </th>
   <th style="text-align:right;"> beer </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 27 </td>
   <td style="text-align:right;"> 19 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 12 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 2 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 22 </td>
   <td style="text-align:right;"> 11 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 11 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 6 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 22 </td>
   <td style="text-align:right;"> 17 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 13 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 8 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 39 </td>
   <td style="text-align:right;"> 17 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 18 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 9 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 25 </td>
   <td style="text-align:right;"> 11 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 14 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 6 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 24 </td>
   <td style="text-align:right;"> 17 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 15 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 32 </td>
   <td style="text-align:right;"> 12 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 19 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 6 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 35 </td>
   <td style="text-align:right;"> 12 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 15 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 6 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 22 </td>
   <td style="text-align:right;"> 18 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 12 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 4 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 31 </td>
   <td style="text-align:right;"> 18 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 11 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 3 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 31 </td>
   <td style="text-align:right;"> 13 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 15 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 8 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 27 </td>
   <td style="text-align:right;"> 14 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 12 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 9 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</div>
</div>
<div style="font-size: 0.7em">
<div>
<ul>
<li class="fragment"><strong>My Goal:</strong> Try their most unique margaritas, but stay moderate. Don’t want to get wrecked!</li>
</ul>
</div>
</div>
</section>
<section class="slide level2">

<h4 id="k-means-and-beyond-clustering-margarita-recipes-1">K-means and Beyond (Clustering Margarita Recipes)</h4>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="images/margarita.jpeg"></p>
</div><div class="column" style="width:60%;">
<div style="font-size: 0.6em">
<div class="cell fig-column-margin">
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
<caption>76 signature Margarita recipes crafted with 10 ingredients or fewer (values are in ml).</caption>
 <thead>
  <tr>
   <th style="text-align:right;"> tequila </th>
   <th style="text-align:right;"> lime_juice </th>
   <th style="text-align:right;"> lemon_juice </th>
   <th style="text-align:right;"> orange_liqueur </th>
   <th style="text-align:right;"> simple_syrup </th>
   <th style="text-align:right;"> agave_nectar </th>
   <th style="text-align:right;"> water </th>
   <th style="text-align:right;"> sugar </th>
   <th style="text-align:right;"> mezcal </th>
   <th style="text-align:right;"> beer </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 27 </td>
   <td style="text-align:right;"> 19 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 12 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 2 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 22 </td>
   <td style="text-align:right;"> 11 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 11 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 6 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 22 </td>
   <td style="text-align:right;"> 17 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 13 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 8 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 39 </td>
   <td style="text-align:right;"> 17 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 18 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 9 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 25 </td>
   <td style="text-align:right;"> 11 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 14 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 6 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 24 </td>
   <td style="text-align:right;"> 17 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 15 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 32 </td>
   <td style="text-align:right;"> 12 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 19 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 6 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 35 </td>
   <td style="text-align:right;"> 12 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 15 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 6 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 22 </td>
   <td style="text-align:right;"> 18 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 12 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 4 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 31 </td>
   <td style="text-align:right;"> 18 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 11 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 0 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 3 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 31 </td>
   <td style="text-align:right;"> 13 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 15 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 8 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 27 </td>
   <td style="text-align:right;"> 14 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 12 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 9 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
</div>
</div>
<div style="font-size: 0.7em">
<ul>
<li><strong>Data analytic aim:</strong> Reduce the complexity of multiple margarita recipes into a manageable number of representative recipes.</li>
</ul>
</div>
</section>
<section class="slide level2">

<h4 id="k-means-and-beyond-clustering-margarita-recipes-2">K-means and Beyond (Clustering Margarita Recipes)</h4>

<img data-src="Napola_files/figure-revealjs/margarita1-1.png" width="960" class="r-stretch"><div style="font-size: 0.7em">
<ul>
<li>Let’s explore this data. Is there any cluster structure?</li>
</ul>
</div>
</section>
<section class="slide level2">

<h4 id="k-means-and-beyond-clustering-margarita-recipes-3">K-means and Beyond (Clustering Margarita Recipes)</h4>

<img data-src="Napola_files/figure-revealjs/margarita2-1.png" width="960" class="r-stretch"><div style="font-size: 0.7em">
<ul>
<li>Let’s explore this data. Is there any cluster structure?</li>
</ul>
</div>
</section>
<section class="slide level2">

<h4 id="k-means-and-beyond-clustering-margarita-recipes-4">K-means and Beyond (Clustering Margarita Recipes)</h4>

<img data-src="Napola_files/figure-revealjs/margarita3-1.png" width="960" class="r-stretch"><div style="font-size: 0.7em">
<ul>
<li>Let’s explore this data. Is there any cluster structure?</li>
</ul>
</div>
</section>
<section class="slide level2">

<h4 id="k-means-on-margarita-recipes">K-means on Margarita Recipes</h4>

<!-- ::: {style="font-size: 0.6em"} -->
<!-- - <span style="color: green;">Cluster 1 ($n = 19$. more lime, lemon-juice (tart)</span> -->
<!-- - <span style="color: purple;">Cluster 2 ($n = 19$). more tequila, mezcal, beer (boozy)</span> -->
<!-- - <span style="color: red;">Cluster 3 ($n = 19$). more orange liqueur, simple syrup, sugar (sweet)</span> -->
<!-- - <span style="color: cyan;">Cluster 4 ($n = 19$). classic (balanced)</span> -->
<!-- ::: -->
<img data-src="Napola_files/figure-revealjs/kmeans-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<h4 id="k-means-on-margarita-recipes-1">K-means on Margarita Recipes</h4>

<img data-src="Napola_files/figure-revealjs/kmeans222-1.png" width="960" class="r-stretch"><div style="font-size: 0.5em">
<ul>
<li>Cluster 1. more lime, lemon-juice (tart)</li>
<li>Cluster 2. more tequila, mezcal, beer (boozy)</li>
<li>Cluster 3. more orange liqueur, simple syrup, sugar (sweet)</li>
<li>Cluster 4. classic (balanced)</li>
</ul>
</div>
</section>
<section class="slide level2">

<h4 id="from-means-to-medoids-partitioning-around-medoids-pam">From Means to Medoids: Partitioning Around Medoids (PAM)</h4>
<div style="font-size: 0.55em">
<div>
<ul>
<li class="fragment">The <em>medoid</em> of a cluster is the object with the least distance to all others, i.e.&nbsp;the most central, most representative object.</li>
</ul>
</div>
<div class="fragment">
<p><strong>1. Initialization:</strong> Randomly select <span class="math inline">\(K\)</span> objects from a dataset <span class="math inline">\(X\)</span> to serve as the initial set of medoids <span class="math inline">\(M\)</span>.</p>
<p><strong>2. Assignment Step:</strong> Assign each object <span class="math inline">\(x_i\)</span> to the closest medoid <span class="math inline">\(m_j\)</span> by minimizing the distance <span class="math inline">\(d(x_i, m_j)\)</span>: <span class="math display">\[C(i) = \arg \min_{j \in \{1, 2, \ldots, K\}} d(x_i, m_j)\]</span></p>
<p><strong>3. Update Step:</strong> For each medoid <span class="math inline">\(m_j\)</span> and each non-medoid data point <span class="math inline">\(x_i\)</span>, swap <span class="math inline">\(m_j\)</span>and <span class="math inline">\(x_i\)</span> and compute the total cost (sum of distances) of the resulting configuration: <span class="math display">\[TC = \sum_{i=1}^{n} d(x_i, m_{C(i)})\]</span> If the total cost <span class="math inline">\(TC\)</span> decreases, accept the swap.</p>
<p><strong>4. Iteration:</strong> Repeat the Assignment and Update steps until there are no changes in the medoid set <span class="math inline">\(M\)</span> or a stopping criterion is met.</p>
</div>
<div class="fragment">
<p>The objective function that PAM tries to minimize is:</p>
<p><span class="math display">\[J = \sum_{j=1}^{K} \sum_{x_i \in C_j} d(x_i, m_j)\]</span></p>
<p>The algorithm is <em>flexible regarding distance metrics or dissimilarity measures</em>.</p>
</div>
</div>
<!-- #### PAM on Margarita Recipes -->
<!-- ::: {style="font-size: 0.6em"} -->
<!-- ```{r pam4ever} -->
<!-- #| echo: false -->
<!-- # Load required libraries -->
<!-- library(ggplot2) -->
<!-- library(cluster)  # Required for PAM clustering -->
<!-- margarita <- read.csv("/Users/amarkos/Dropbox/Spectral_mix_distances (1)/margarita.csv") -->
<!-- set.seed(1234) -->
<!-- margarita <- data.frame(margarita) -->
<!-- # Perform PAM clustering -->
<!-- pam_result <- pam(margarita[,1:10], k = 4, nstart=100) -->
<!-- # Extract cluster medoids and labels -->
<!-- medoids <- as.data.frame(pam_result$medoids) -->
<!-- #colnames(centroids) <- colnames(margarita)  # Ensure column names match with the main data -->
<!-- medoids$Cluster <- as.factor(1:4)  # Add a cluster label to each centroid -->
<!-- # Add cluster labels to the main data -->
<!-- margarita$Cluster <- as.factor(pam_result$clustering) -->
<!-- # Create a ggplot2 scatter plot with custom background color, no axes, legends, or grids, and a white title -->
<!-- ggplot(margarita, aes(x = tequila, y = lime_juice , color = Cluster)) + -->
<!--     geom_point(size=4) + -->
<!--     coord_fixed(ratio = 1) + -->
<!--     geom_point(data = medoids, aes(x = tequila, y = lime_juice, color = Cluster), size = 4, stroke = 2) + -->
<!--     labs(x = "TEQUILA (ml)", y = "LIME JUICE (ml)")+ -->
<!--     ggtitle("PAM Clustering with 4 Clusters") + -->
<!--     theme( -->
<!--       plot.background = element_rect(fill = "#ffffff"), -->
<!--       panel.background = element_rect(fill = "#ffffff"), -->
<!--   axis.text = element_text(color = "black"),   -->
<!--     axis.title = element_text(color = "black"),   -->
<!--     axis.line = element_line(color = "black"), -->
<!--       legend.position = "none", -->
<!--       panel.grid.major = element_blank(), -->
<!--       panel.grid.minor = element_blank(), -->
<!--       plot.title = element_text(color = "white") -->
<!--     ) -->
<!-- ``` -->
<!-- ::: -->
</section>
<section class="slide level2">

<h4 id="pam-on-margarita-recipes">PAM on Margarita Recipes</h4>
<div style="font-size: 0.6em">
<div class="cell">
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;">  </th>
   <th style="text-align:right;"> tequila </th>
   <th style="text-align:right;"> lime_juice </th>
   <th style="text-align:right;"> lemon_juice </th>
   <th style="text-align:right;"> orange_liqueur </th>
   <th style="text-align:right;"> simple_syrup </th>
   <th style="text-align:right;"> agave_nectar </th>
   <th style="text-align:right;"> water </th>
   <th style="text-align:right;"> sugar </th>
   <th style="text-align:right;"> mezcal </th>
   <th style="text-align:right;"> beer </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 27 </td>
   <td style="text-align:right;"> 19 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 12 </td>
   <td style="text-align:right;"> 7 </td>
   <td style="text-align:right;"> 8 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 2 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 27 </td>
   <td style="text-align:right;"> 17 </td>
   <td style="text-align:right;"> 11 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 27 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 6 </td>
   <td style="text-align:right;"> 10 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 0 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 42 </td>
   <td style="text-align:right;"> 32 </td>
   <td style="text-align:right;"> 29 </td>
   <td style="text-align:right;"> 17 </td>
   <td style="text-align:right;"> 9 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 5 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 1 </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 63 </td>
   <td style="text-align:right;"> 51 </td>
   <td style="text-align:right;"> 11 </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 11 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 13 </td>
   <td style="text-align:right;"> 13 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<ul>
<li>Cluster 1 (<span class="math inline">\(n = 20\)</span>). Balanced</li>
<li>Cluster 2 (<span class="math inline">\(n = 18\)</span>). Sweet</li>
<li>Cluster 3 (<span class="math inline">\(n = 19\)</span>). Tart</li>
<li>Cluster 4 (<span class="math inline">\(n = 19\)</span>). Boozy</li>
</ul>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Confusion matrix"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>   kmeans
pam  1  2  3  4
  1  0  1  0 19
  2  0 18  0  0
  3  0  0 19  0
  4 19  0  0  0</code></pre>
</div>
</div>
</section>
<section class="slide level2">

<h4 id="hierarchical-clustering-on-margarita-recipes">Hierarchical Clustering on Margarita Recipes</h4>
<div style="font-size: 0.6em">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Napola_files/figure-revealjs/hc33-1.png" width="960"></p>
</div>
</div>
</div>
<div style="font-size: 0.7em">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Confusion matrix"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>            kmeans
hierarchical  1  2  3  4
           1  0  3 19  0
           2 19  0  0  0
           3  0 16  0  0
           4  0  0  0 19</code></pre>
</div>
</div>
</div>
</section>
<section class="slide level2">

<h4 id="gaussian-mixture-model-gmm">Gaussian Mixture Model (GMM)</h4>
<div style="font-size: 0.5em">
<p>The Gaussian Mixture Model assumes that the data is generated from multiple Gaussian distributions with different means and variances. The probability density <span class="math inline">\(p(x)\)</span> is a weighted sum of <span class="math inline">\(K\)</span> Gaussian distributions:</p>
<p><span class="math display">\[p(x) = \sum_{k=1}^{K} \pi_k \mathcal{N}(x | \mu_k, \Sigma_k)\]</span></p>
<p>Here, <span class="math inline">\(\pi_k\)</span> are the mixing coefficients, and <span class="math inline">\(\mu_k, \Sigma_k\)</span> are the mean and covariance matrix for each Gaussian.</p>
<h3 id="parameter-estimation-using-expectation-maximization-em">Parameter Estimation using Expectation-Maximization (EM)</h3>
<p>The EM algorithm iteratively performs the following two steps:</p>
<h4 id="e-step">E-Step</h4>
<p>Calculate the “responsibilities” <span class="math inline">\(\gamma(z_{nk})\)</span>, which indicate the likelihood that data point <span class="math inline">\(n\)</span> was generated by Gaussian <span class="math inline">\(k\)</span>:</p>
<p><span class="math display">\[\gamma(z_{nk}) = \frac{\pi_k \mathcal{N}(x_n | \mu_k, \Sigma_k)}{\sum_{j=1}^{K} \pi_j \mathcal{N}(x_n | \mu_j, \Sigma_j)}\]</span></p>
<h4 id="m-step">M-Step</h4>
<p>Update the parameters <span class="math inline">\(\pi_k, \mu_k, \Sigma_k\)</span> to maximize the expected log-likelihood:</p>
<p><span class="math display">\[\mu_k = \frac{\sum_{n=1}^{N} \gamma(z_{nk}) x_n}{\sum_{n=1}^{N} \gamma(z_{nk})}\]</span> <span class="math display">\[\Sigma_k = \frac{\sum_{n=1}^{N} \gamma(z_{nk}) (x_n - \mu_k)(x_n - \mu_k)^T}{\sum_{n=1}^{N} \gamma(z_{nk})}, \pi_k = \frac{\sum_{n=1}^{N} \gamma(z_{nk})}{N}\]</span></p>
</div>
</section>
<section class="slide level2">

<h4 id="gmm-on-margarita-recipes">GMM on Margarita Recipes</h4>
<!-- The data can be assumed to be generated from a statistical model in which different clusters are modelled by different distributions from the same family, or in which clusters are associated with density modes. -->
<div style="font-size: 0.6em">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>---------------------------------------------------- 
Gaussian finite mixture model fitted by EM algorithm 
---------------------------------------------------- 

Mclust EEI (diagonal, equal volume and shape) model with 4 components: 

 log-likelihood  n df      BIC       ICL
      -1963.996 76 53 -4157.52 -4157.884

Clustering table:
 1  2  3  4 
19 19 19 19 </code></pre>
</div>
<div class="cell-output-display">
<p><img data-src="Napola_files/figure-revealjs/GMM-1.png" width="960"></p>
</div>
</div>
</div>
</section>
<section class="slide level2">

<h4 id="beyond-partitioning-methods-how-many-clusters">Beyond partitioning methods: How many clusters?</h4>

<img data-src="Napola_files/figure-revealjs/dbscan1-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<h4 id="beyond-partitioning-methods-how-many-clusters-1">Beyond partitioning methods: How many clusters?</h4>

<img data-src="Napola_files/figure-revealjs/dbscan2-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<h4 id="density-based-methods-dbscan">Density-based methods (DBSCAN)</h4>
<div style="font-size: 0.6em">
<p>Density-Based Spatial Clustering of Applications with Noise - DBSCAN (Ester et al., 1996) operates on the principle that <strong>a cluster is a dense region in the data</strong>.</p>
<!-- The idea is that if a particular point belongs to a cluster, it should be near to lots of other points in that cluster.  -->
<div class="fragment">
<p><strong>Parameters</strong></p>
<ul>
<li><span class="math inline">\(\epsilon\)</span> (radius): Distance threshold for neighborhood</li>
<li>MinPts (minimum points): Minimum number of points to form a dense region</li>
</ul>
<p>The algorithm starts by randomly selecting a point not yet part of any cluster. If this point’s <span class="math inline">\(\epsilon\)</span>-neighborhood contains at least MinPts points, a cluster is initiated around it; otherwise, the point is labeled as noise.</p>
<p>When a core point is identified (one with MinPts within its <span class="math inline">\(\epsilon\)</span>-neighborhood), the cluster expands to include all reachable points within distance <span class="math inline">\(\epsilon\)</span>.</p>
<p>The algorithm continues until all points are either clustered or labeled as noise.</p>
</div>
<div class="fragment">
<p><strong>Advantages</strong></p>
<ul>
<li><p>Does not require the number of clusters to be specified</p></li>
<li><p>Good at separating clusters from noise</p></li>
<li><p>Works with arbitrary distance measures.</p></li>
</ul>
<p>Extensions to deal with varying densities: HDBSCAN, OPTICS…</p>
</div>
</div>
</section>
<section class="slide level2">

<h4 id="dbscan">DBSCAN</h4>

<img data-src="Napola_files/figure-revealjs/dbscan3-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<!-- <!-- #### Spectral Clustering -->
<!-- <!-- ::: {style="font-size: 0.5em"} -->
<!-- <!-- ::: {.fragment} -->
<!-- <!-- #### Step 1: Construct Similarity Matrix -->
<!-- <!-- Given a dataset $\mathbf{X} = \{ x_1, x_2, \ldots, x_n \}$, compute the pairwise similarity matrix $\mathbf{S}$, $S_{ij} = \text{sim}(x_i, x_j),$ -->
<!-- <!-- where $\text{sim}(\cdot)$ is a similarity measure like Gaussian Radial Basis Function: $\text{sim}(x_i, x_j) = e^{-\frac{||x_i - x_j||^2}{2\sigma^2}}$ -->
<!-- <!-- ::: -->
<!-- <!-- ::: {.fragment} -->
<!-- <!-- #### Step 2: Construct Laplacian Matrix -->
<!-- <!-- Construct the Laplacian matrix $\mathbf{L}$ from the similarity matrix $\mathbf{S}$. -->
<!-- <!-- 1. **Degree Matrix, $\mathbf{D}$**: A diagonal matrix where $D_{ii} = \sum_{j=1}^{n} S_{ij}$ -->
<!-- <!-- 2. **Laplacian Matrix**: $\mathbf{L} = \mathbf{D} - \mathbf{S}$ -->
<!-- <!-- ::: -->
<!-- <!-- ::: {.fragment} -->
<!-- <!-- #### Step 3: Eigenvalue Decomposition -->
<!-- <!-- Compute the eigenvalues and eigenvectors of $\mathbf{L}$. Let $\lambda_1, \lambda_2, \ldots, \lambda_n$ be the eigenvalues and $u_1, u_2, \ldots, u_n$ be the corresponding eigenvectors. -->
<!-- <!-- $$\mathbf{L} \cdot u = \lambda \cdot u$$ -->
<!-- <!-- ::: -->
<!-- <!-- ::: {.fragment} -->
<!-- <!-- #### Step 4: Select $k$ Smallest Eigenvectors -->
<!-- <!-- Select $k$ eigenvectors corresponding to the $k$ smallest eigenvalues to form a matrix $\mathbf{U}$ where columns are the eigenvectors. -->
<!-- <!-- $$\mathbf{U} = [u_1, u_2, \ldots, u_k]$$ -->
<!-- <!-- ::: -->
<!-- <!-- ::: {.fragment} -->
<!-- <!-- #### Step 5: Row-wise Normalize $\mathbf{U}$ -->
<!-- <!-- Normalize each row of the matrix $\mathbf{U}$ to have unit length. -->
<!-- <!-- $$y_{ij} = \frac{u_{ij}}{\sqrt{\sum_{p=1}^{k} u_{ip}^2}}$$ -->
<!-- <!-- ::: -->
<!-- <!-- ::: {.fragment} -->
<!-- <!-- #### Step 6: Apply K-means Clustering -->
<!-- <!-- Use K-means clustering on the row-wise normalized matrix $\mathbf{U}$ to find $k$ clusters $C_1, C_2, \ldots, C_k$. -->
<!-- <!-- ::: -->
<!-- <!-- ::: -->
<!-- --- -->
<!-- ```{r spcc} -->
<!-- #| echo: false -->
<!-- library(ggplot2) -->
<!-- library(dbscan) -->
<!-- library(kernlab) -->
<!-- library(gridExtra) -->
<!-- data(moons) -->
<!-- data2 <- read.csv("/Users/amarkos/Dropbox/Spectral_mix_distances (1)/moon2.csv") -->
<!-- sc1 <- specc(data.matrix(moons), centers=4, kernel="polydot") -->
<!-- #plot(moons, col=sc1) -->
<!-- sc2 <- specc(data.matrix(data2), centers=2, kernel="polydot") -->
<!-- #plot(data2, col=sc2) -->
<!-- cluster <- as.factor(sc1@.Data) -->
<!-- moons$cluster <- cluster -->
<!-- # Create the ggplot -->
<!-- p2 <- ggplot(moons, aes(x=X, y=Y, color=cluster)) + -->
<!--   geom_point(shape=19, alpha=0.6) + -->
<!--   ggtitle("Spectral Clustering") + -->
<!--   xlab("X") + -->
<!--   ylab("Y") + -->
<!--   scale_color_manual(values = c("red", "blue","green","purple")) + -->
<!--   coord_fixed(ratio=1)  # Set aspect ratio to 1 -->
<!-- cluster <- as.factor(sc2@.Data) -->
<!-- # Create the ggplot -->
<!-- p1 <- ggplot(data2, aes(x=X, y=Y, color=cluster)) + -->
<!--   geom_point(shape=19, alpha=0.6) + -->
<!--   ggtitle("Spectral Clustering") + -->
<!--   xlab("X") + -->
<!--   ylab("Y") + -->
<!--   scale_color_manual(values = c("red", "blue")) + -->
<!--   coord_fixed(ratio=1)  # Set aspect ratio to 1 -->
<!-- grid.arrange(p1, p2, ncol=2) -->
<!-- ``` -->
<h4 id="hdbscan-on-margarita-recipes">HDBSCAN on Margarita Recipes</h4>
<div style="font-size: 0.6em">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Napola_files/figure-revealjs/HDBSCAN-1.png" width="960"></p>
</div>
</div>
</div>
</section>
<section class="slide level2">

<h4 id="knowledge-check">Knowledge Check</h4>
<div style="font-size: 0.6em">
<p><strong>Question 1:</strong> Which clustering algorithm works directly on observed data with reference to an underlying probability model?</p>
<ol type="A">
<li><p>K-Means</p></li>
<li><p>Gaussian Mixture Model</p></li>
<li><p>Partitioning Around Medoids</p></li>
<li><p>DBSCAN</p></li>
<li><p>Hierarchical Clustering</p></li>
</ol>
<p><strong>Question 2:</strong> Pair the members from the two sets</p>
<p>Set 1: K-Means, Gaussian Mixture Model, Partitioning Around Medoids, DBSCAN</p>
<p>Set 2: Distribution Clustering, Centroid Clustering, Density Clustering</p>
</div>
</section>
<section class="slide level2">

<h4 id="beyond-numeric-data-mcdonalds-customer-segmentation">Beyond Numeric Data (McDonald’s customer segmentation)</h4>
<div style="font-size: 0.6em">
<div class="fragment">
<div class="cell">
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> yummy </th>
   <th style="text-align:left;"> convenient </th>
   <th style="text-align:left;"> spicy </th>
   <th style="text-align:left;"> fattening </th>
   <th style="text-align:left;"> greasy </th>
   <th style="text-align:left;"> fast </th>
   <th style="text-align:left;"> cheap </th>
   <th style="text-align:left;"> tasty </th>
   <th style="text-align:left;"> expensive </th>
   <th style="text-align:left;"> healthy </th>
   <th style="text-align:left;"> disgusting </th>
   <th style="text-align:left;"> Like </th>
   <th style="text-align:right;"> Age </th>
   <th style="text-align:left;"> VisitFrequency </th>
   <th style="text-align:left;"> Gender </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> -3 </td>
   <td style="text-align:right;"> 61 </td>
   <td style="text-align:left;"> Every three months </td>
   <td style="text-align:left;"> Female </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> +2 </td>
   <td style="text-align:right;"> 51 </td>
   <td style="text-align:left;"> Every three months </td>
   <td style="text-align:left;"> Female </td>
  </tr>
  <tr>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> +1 </td>
   <td style="text-align:right;"> 62 </td>
   <td style="text-align:left;"> Every three months </td>
   <td style="text-align:left;"> Female </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> +4 </td>
   <td style="text-align:right;"> 69 </td>
   <td style="text-align:left;"> Once a week </td>
   <td style="text-align:left;"> Female </td>
  </tr>
  <tr>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> +2 </td>
   <td style="text-align:right;"> 49 </td>
   <td style="text-align:left;"> Once a month </td>
   <td style="text-align:left;"> Male </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> +2 </td>
   <td style="text-align:right;"> 55 </td>
   <td style="text-align:left;"> Every three months </td>
   <td style="text-align:left;"> Male </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<div>
<ul>
<li class="fragment">Responses from <span class="math inline">\(1453\)</span> adult Australian consumers relating to their perceptions of McDonald’s w.r.t. <span class="math inline">\(11\)</span> binary attributes.</li>
<li class="fragment"><strong>Data analytic aim</strong>: discover whether there are consumer segments with unique perceptions of the brand. <!-- -   Understanding such systematic differences of brand perceptions by market segments informs which market segments to focus on, and what messages to communicate to them. Marketing mix is a strategy that the company follows to achieve its marketing objectives --></li>
<li class="fragment">The management wants to understand the key drivers of the negative perceptions, and modify them.</li>
<li class="fragment">Desirable target segment(s) characteristics: distinct and homogeneous, identifiable, reachable and large enough to justify a customised marketing mix (Leisch, Dolnicar &amp; Grün, 2018).</li>
</ul>
</div>
</div>
<!-- Leisch, Dolnicar, & Grün (2018)

Leisch, F., Dolnicar, S., & Grün, B. (2018). Market segmentation analysis: Understanding it, doing it, and making it useful.

<!-- McDonald's management needs to decide which key features make a market segment attractive to them. In terms of knock-out criteria, the target segment or target segments must be homogeneous, distinct, large enough to justify the development and implementation of a customised marketing mix, matching the strengths of McDonald’s (meaning, for example, that they must be open to eating at fast food restaurants rather than rejecting them outright), identifiable (meaning that there must be some way of spotting them among other -->
<!-- consumers) and, finally, reachable (meaning that channels of communication and distribution need to exist which make it possible to aim at members of the target segment specifically). -->
<!-- In terms of segment attractiveness criteria, the obvious choice would be a segment that has a positive perception of McDonald's, frequently eats out and likes fast food. But McDonald’s management could also decide that they not only wish to solidify their position in market segments in which they already hold high market shares, but rather wish to learn more about market segments which are currently not fond of McDonald's; try to understand which perceptions are responsible for this; and attempt to modify those very perceptions. Given that the fast food data set in this case study contains very little information beyond people’s brand image of McDonald’s, the following attractiveness criteria will be used: liking McDonald’s and frequently eating at McDonald’s. These segment attractiveness criteria represent key information in Step 8 where they inform target segment selection. -->
<!-- A second approach to determining a good number of segments is to use -->

<!-- stability-based data structure analysis. Stability-based data structure analysis also indicates whether market segments occur naturally in the data, or if they have to be artificially constructed. Stability-based data structure analysis uses stability across replications as criterion to offer this guidance. Imagine using a market segmentation solution which cannot be reproduced. Such a solution would give McDonald’s management little confidence in terms of investing substantial resources into a market segmentation strategy. Assessing the stability of segmentation solutions across repeated calculations (Dolnicar and Leisch 2010) ensures that unstable, random solutions are not used. -->
<!-- Global stability is the extent to which the same segmentation solution emerges -->
<!-- if the analysis is repeated many times using bootstrap samples (randomly drawn -->
<!-- subsets) of the data. Global stability is calculated using the following R code, -->
<!-- which conducts the analysis for each number of segments (between two and eight) -->
<!-- using 2 × 100 bootstrap samples (argument nboot) and ten random initialisations -->
<!-- (argument nrep) of k-means for each sample and number of segments:-->
</section>
<section class="slide level2">

<h4 id="dissimilarity-measures-for-categorical-data">(Dis)similarity measures for categorical data</h4>
<div style="font-size: 0.6em">
<p>How (dis)similar are these two individuals?</p>
<div class="fragment">
<div class="cell">
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> yummy </th>
   <th style="text-align:left;"> convenient </th>
   <th style="text-align:left;"> spicy </th>
   <th style="text-align:left;"> fattening </th>
   <th style="text-align:left;"> greasy </th>
   <th style="text-align:left;"> fast </th>
   <th style="text-align:left;"> cheap </th>
   <th style="text-align:left;"> tasty </th>
   <th style="text-align:left;"> expensive </th>
   <th style="text-align:left;"> healthy </th>
   <th style="text-align:left;"> disgusting </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> No </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> No </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<div>
<ul>
<li class="fragment">We can calculate the proportion of matching opinions <span class="math inline">\(\frac{8}{11} \approx 0.73\)</span>. Then, the dissimilarity or distance is <span class="math inline">\(1 - 0.73 = 0.27\)</span>.</li>
</ul>
</div>
<div class="fragment">
<!-- -->
<h4 id="simple-matching-distance">Simple Matching Distance</h4>
<p><span class="math display">\[d_{SM}(x_1, x_2) = \frac{1}{p} \sum_{j=1}^{p} 1(x_{1j} \neq x_{2j})\]</span> <span class="math inline">\(1(\cdot)\)</span> is the indicator function.</p>
<ul>
<li><span class="math inline">\(d_{SM}\)</span> is a <strong>metric</strong> and the most used dissimilarity measure for nominal data.</li>
</ul>
</div>
</div>
<!-- 
            Used as part of Gower's similarity coefficient (Gower 1971)
            Since it only recognizes if two categories match or not, it neglects important characteristics of a dataset, such as the number of categories or the absolute frequencies of categories, which could be used for a better similarity determination.  -->
</section>
<section class="slide level2">

<h4 id="a-reminder">A reminder</h4>
<div style="font-size: 0.6em">
<p>To be considered a metric, a distance measure must satisfy the following properties:</p>
<ol type="1">
<li><p><strong>Non-negativity</strong>:<br>
<span class="math display">\[d(x, y) \geq 0\]</span></p></li>
<li><p><strong>Identity of Indiscernibles</strong>:<br>
<span class="math display">\[d(x, y) = 0 \text{ if and only if } x = y\]</span></p></li>
<li><p><strong>Symmetry</strong>:<br>
<span class="math display">\[d(x, y) = d(y, x)\]</span></p></li>
<li><p><strong>Triangle Inequality</strong>:<br>
<span class="math display">\[d(x, z) \leq d(x, y) + d(y, z)\]</span></p></li>
</ol>
</div>
</section>
<section class="slide level2">

<h4 id="dissimilarity-measures-for-categorical-data-1">(Dis)similarity measures for categorical data</h4>
<div style="font-size: 0.6em">
<p>How (dis)similar are these two individuals?</p>
<div class="fragment">
<div class="cell">
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> yummy </th>
   <th style="text-align:left;"> convenient </th>
   <th style="text-align:left;"> spicy </th>
   <th style="text-align:left;"> fattening </th>
   <th style="text-align:left;"> greasy </th>
   <th style="text-align:left;"> fast </th>
   <th style="text-align:left;"> cheap </th>
   <th style="text-align:left;"> tasty </th>
   <th style="text-align:left;"> expensive </th>
   <th style="text-align:left;"> healthy </th>
   <th style="text-align:left;"> disgusting </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> No </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> No </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<div>
<ul>
<li class="fragment"><p>Another idea is to calculate the ratio of attributes that both individuals have in common (marked as ‘Yes’ by both) to the attributes that are selected by either of the two individuals.</p></li>
<li class="fragment"><p><span class="math inline">\(\frac{5}{8} \approx 0.62\)</span>, indicating that they share about <span class="math inline">\(62\%\)</span> of their total unique attributes. Their distance is <span class="math inline">\(1 - 0.62 = 0.38\)</span>.</p></li>
</ul>
</div>
<div class="fragment">
<!-- -->
<h4 id="jaccard-distance-binary-only-asymmetric">Jaccard Distance (binary only, asymmetric)</h4>
<p><span class="math display">\[d_J(x_1, x_2) = 1 - \frac{\sum_{j=1}^{p} 1(x_{1j} = 1 \text{ and } x_{2j} = 1)}{\sum_{j=1}^{p} 1(x_{1j} = 1 \text{ or } x_{2j} = 1)}\]</span></p>
</div>
</div>
</section>
<section class="slide level2">

<h4 id="dissimilarity-measures-for-categorical-data-2">(Dis)similarity measures for categorical data</h4>
<div style="font-size: 0.6em">
<div class="fragment">
<div class="cell">
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> yummy </th>
   <th style="text-align:left;"> convenient </th>
   <th style="text-align:left;"> spicy </th>
   <th style="text-align:left;"> fattening </th>
   <th style="text-align:left;"> greasy </th>
   <th style="text-align:left;"> fast </th>
   <th style="text-align:left;"> cheap </th>
   <th style="text-align:left;"> tasty </th>
   <th style="text-align:left;"> expensive </th>
   <th style="text-align:left;"> healthy </th>
   <th style="text-align:left;"> disgusting </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> No </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> No </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<div>
<ul>
<li class="fragment">In the study, only <span class="math inline">\(9\%\)</span> of participants considered McDonald’s to be spicy, while <span class="math inline">\(20\%\)</span> deemed it healthy, and a significant <span class="math inline">\(91\%\)</span> found it convenient. Given these varying percentages, does agreeing on the attribute ‘convenient’ carry the same weight in determining similarity between two individuals as agreeing on ‘spicy’ or ‘healthy’?</li>
</ul>
</div>
<div class="fragment">
<div class="cell">
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> yummy </th>
   <th style="text-align:right;"> convenient </th>
   <th style="text-align:right;"> spicy </th>
   <th style="text-align:right;"> fattening </th>
   <th style="text-align:right;"> greasy </th>
   <th style="text-align:right;"> fast </th>
   <th style="text-align:right;"> cheap </th>
   <th style="text-align:right;"> tasty </th>
   <th style="text-align:right;"> expensive </th>
   <th style="text-align:right;"> healthy </th>
   <th style="text-align:right;"> disgusting </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 0.55 </td>
   <td style="text-align:right;"> 0.91 </td>
   <td style="text-align:right;"> 0.09 </td>
   <td style="text-align:right;"> 0.87 </td>
   <td style="text-align:right;"> 0.53 </td>
   <td style="text-align:right;"> 0.9 </td>
   <td style="text-align:right;"> 0.6 </td>
   <td style="text-align:right;"> 0.64 </td>
   <td style="text-align:right;"> 0.36 </td>
   <td style="text-align:right;"> 0.2 </td>
   <td style="text-align:right;"> 0.24 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<div>
<ul>
<li class="fragment">What if one variable has multiple levels (categories) while another has only a few? Does similarity in one variable carry the same weight in determining overall similarity as being similar in the other variable?</li>
</ul>
</div>
</div>
</section>
<section class="slide level2">

<h4 id="dissimilarity-measures-for-categorical-data-3">(Dis)similarity measures for categorical data</h4>
<div style="font-size: 0.6em">
<table>
<colgroup>
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
<col style="width: 20%">
</colgroup>
<thead>
<tr class="header">
<th>Measure</th>
<th><span class="math inline">\(x_i = x_j\)</span></th>
<th><span class="math inline">\(x_i \neq x_j\)</span></th>
<th><span class="math inline">\(S(x_i, x_j)\)</span></th>
<th><span class="math inline">\(D(x_i, x_j)\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Simple Matching</td>
<td>1</td>
<td>0</td>
<td><span class="math inline">\(\frac{\sum_{c=1}^{m} S_c(x_{ic}, x_{jc})}{m}\)</span></td>
<td><span class="math inline">\(1 - S(x_i, x_j)\)</span></td>
</tr>
<tr class="even">
<td>Eskin</td>
<td>1</td>
<td><span class="math inline">\(\frac{K^2_c}{K^2_c + 2}\)</span></td>
<td><span class="math inline">\(\frac{\sum_{c=1}^{m} S_c(x_{ic}, x_{jc})}{m}\)</span></td>
<td><span class="math inline">\(\frac{1}{S(x_i, x_j)} - 1\)</span></td>
</tr>
<tr class="odd">
<td>Goodall (G3)</td>
<td><span class="math inline">\(1 - p^2(x_i)\)</span></td>
<td>0</td>
<td><span class="math inline">\(\frac{\sum_{c=1}^{m} S_c(x_{ic}, x_{jc})}{m}\)</span></td>
<td><span class="math inline">\(1 - S(x_i, x_j)\)</span></td>
</tr>
<tr class="even">
<td>Goodall (G4)</td>
<td><span class="math inline">\(p^2(x_i)\)</span></td>
<td>0</td>
<td><span class="math inline">\(\frac{\sum_{c=1}^{m} S_c(x_{ic}, x_{jc})}{m}\)</span></td>
<td><span class="math inline">\(1 - S(x_i, x_j)\)</span></td>
</tr>
<tr class="odd">
<td>IOF</td>
<td>1</td>
<td><span class="math inline">\(\frac{1}{1 + \ln f(x_i) \cdot \ln f(x_j)}\)</span></td>
<td><span class="math inline">\(\frac{\sum_{c=1}^{m} S_c(x_{ic}, x_{jc})}{m}\)</span></td>
<td><span class="math inline">\(\frac{1}{S(x_i, x_j)} - 1\)</span></td>
</tr>
<tr class="even">
<td>LIN</td>
<td><span class="math inline">\(2 \ln p(x_i)\)</span></td>
<td><span class="math inline">\(2 \ln \left( \frac{p(x_i) + p(x_j)}{2} \right)\)</span></td>
<td><span class="math inline">\(\frac{\sum_{c=1}^{m} \ln p(x_{ic}) + \ln p(x_{jc})}{m}\)</span></td>
<td><span class="math inline">\(\frac{1}{S(x_i, x_j)} - 1\)</span></td>
</tr>
<tr class="odd">
<td>LIN1</td>
<td><span class="math inline">\(\sum_{q \in Q} \ln p(q)\)</span></td>
<td><span class="math inline">\(2 \ln \left( \frac{p(x_i) + p(x_j)}{2} \right)\)</span></td>
<td><span class="math inline">\(\frac{\sum_{c=1}^{m} \ln p(x_{ic}) + \ln p(x_{jc})}{m}\)</span></td>
<td><span class="math inline">\(\frac{1}{S(x_i, x_j)} - 1\)</span></td>
</tr>
<tr class="even">
<td>OF</td>
<td>1</td>
<td><span class="math inline">\(\frac{1}{1 + \frac{n}{\ln f(x_i)} \cdot \frac{n}{\ln f(x_j)}}\)</span></td>
<td><span class="math inline">\(\frac{\sum_{c=1}^{m} S_c(x_{ic}, x_{jc})}{m}\)</span></td>
<td><span class="math inline">\(\frac{1}{S(x_i, x_j)} - 1\)</span></td>
</tr>
</tbody>
</table>
</div>
<div style="font-size: 0.6em">
<p>(Šulc &amp; Řezanková, 2019)</p>
</div>
<!-- Šulc, Z., & Řezanková, H. (2019). Comparison of similarity measures for categorical data in hierarchical clustering. Journal of Classification, 36, 58-72. -->
</section>
<section class="slide level2">

<h4 id="dissimilarity-measures-for-categorical-data-4">(Dis)similarity measures for categorical data</h4>
<div style="font-size: 0.6em">
<div class="cell">
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> yummy </th>
   <th style="text-align:left;"> convenient </th>
   <th style="text-align:left;"> spicy </th>
   <th style="text-align:left;"> fattening </th>
   <th style="text-align:left;"> greasy </th>
   <th style="text-align:left;"> fast </th>
   <th style="text-align:left;"> cheap </th>
   <th style="text-align:left;"> tasty </th>
   <th style="text-align:left;"> expensive </th>
   <th style="text-align:left;"> healthy </th>
   <th style="text-align:left;"> disgusting </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> No </td>
  </tr>
  <tr>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
  </tr>
</tbody>
</table>

</div>
</div>
<div>
<ul>
<li class="fragment"><p>In the context of the previously discussed dis(similarities), how can we incorporate the associations between variables when calculating similarity?</p></li>
<li class="fragment"><p>Consider the conditional relative frequencies of ‘spicy:Yes’ and ‘spicy:No’ (a.k.a. row profiles).</p></li>
</ul>
<div class="fragment">
<div class="cell">
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> yummy:No </th>
   <th style="text-align:right;"> yummy:Yes </th>
   <th style="text-align:right;"> convenient:No </th>
   <th style="text-align:right;"> convenient:Yes </th>
   <th style="text-align:right;"> fattening:No </th>
   <th style="text-align:right;"> fattening:Yes </th>
   <th style="text-align:right;"> greasy:No </th>
   <th style="text-align:right;"> greasy:Yes </th>
   <th style="text-align:right;"> fast:No </th>
   <th style="text-align:right;"> fast:Yes </th>
   <th style="text-align:right;"> cheap:No </th>
   <th style="text-align:right;"> cheap:Yes </th>
   <th style="text-align:right;"> tasty:No </th>
   <th style="text-align:right;"> tasty:Yes </th>
   <th style="text-align:right;"> expensive:No </th>
   <th style="text-align:right;"> expensive:Yes </th>
   <th style="text-align:right;"> healthy:No </th>
   <th style="text-align:right;"> healthy:Yes </th>
   <th style="text-align:right;"> disgusting:No </th>
   <th style="text-align:right;"> disgusting:Yes </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> spicy:No </td>
   <td style="text-align:right;"> 0.45 </td>
   <td style="text-align:right;"> 0.55 </td>
   <td style="text-align:right;"> 0.09 </td>
   <td style="text-align:right;"> 0.91 </td>
   <td style="text-align:right;"> 0.13 </td>
   <td style="text-align:right;"> 0.87 </td>
   <td style="text-align:right;"> 0.48 </td>
   <td style="text-align:right;"> 0.52 </td>
   <td style="text-align:right;"> 0.10 </td>
   <td style="text-align:right;"> 0.90 </td>
   <td style="text-align:right;"> 0.40 </td>
   <td style="text-align:right;"> 0.60 </td>
   <td style="text-align:right;"> 0.37 </td>
   <td style="text-align:right;"> 0.63 </td>
   <td style="text-align:right;"> 0.65 </td>
   <td style="text-align:right;"> 0.35 </td>
   <td style="text-align:right;"> 0.81 </td>
   <td style="text-align:right;"> 0.19 </td>
   <td style="text-align:right;"> 0.76 </td>
   <td style="text-align:right;"> 0.24 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> spicy:Yes </td>
   <td style="text-align:right;"> 0.43 </td>
   <td style="text-align:right;"> 0.57 </td>
   <td style="text-align:right;"> 0.07 </td>
   <td style="text-align:right;"> 0.93 </td>
   <td style="text-align:right;"> 0.18 </td>
   <td style="text-align:right;"> 0.82 </td>
   <td style="text-align:right;"> 0.39 </td>
   <td style="text-align:right;"> 0.61 </td>
   <td style="text-align:right;"> 0.08 </td>
   <td style="text-align:right;"> 0.92 </td>
   <td style="text-align:right;"> 0.38 </td>
   <td style="text-align:right;"> 0.62 </td>
   <td style="text-align:right;"> 0.26 </td>
   <td style="text-align:right;"> 0.74 </td>
   <td style="text-align:right;"> 0.57 </td>
   <td style="text-align:right;"> 0.43 </td>
   <td style="text-align:right;"> 0.67 </td>
   <td style="text-align:right;"> 0.33 </td>
   <td style="text-align:right;"> 0.71 </td>
   <td style="text-align:right;"> 0.29 </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<ul>
<li class="fragment"><p>The two profiles look similar. How can we integrate this information into the calculation of dissimilarity?</p></li>
<li class="fragment"><p>Idea: Compute a dissimilarity measure for each variable by exploiting the distance between two probability distributions (<em>chi-squared distances</em>, <em>Kullback–Leibler</em>, <em>total variation</em>, and <em>Hellinger distance</em>).</p></li>
</ul>
</div>
</div>
</section>
<section class="slide level2">

<h4 id="dissimilarity-measures-for-categorical-data-5">(Dis)similarity measures for categorical data</h4>
<div style="font-size: 0.6em">
<div class="cell">
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> yummy </th>
   <th style="text-align:left;"> convenient </th>
   <th style="text-align:left;"> spicy </th>
   <th style="text-align:left;"> fattening </th>
   <th style="text-align:left;"> greasy </th>
   <th style="text-align:left;"> fast </th>
   <th style="text-align:left;"> cheap </th>
   <th style="text-align:left;"> tasty </th>
   <th style="text-align:left;"> expensive </th>
   <th style="text-align:left;"> healthy </th>
   <th style="text-align:left;"> disgusting </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> No </td>
  </tr>
  <tr>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
  </tr>
</tbody>
</table>

</div>
</div>
<ul>
<li><p>In the context of the previously discussed dis(similarities), how can we incorporate the associations between variables when calculating similarity?</p></li>
<li><p>Consider the conditional relative frequencies of ‘spicy:Yes’ and ‘spicy:No’ (a.k.a. row profiles).</p></li>
</ul>
<div class="cell">
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> yummy:No </th>
   <th style="text-align:right;"> yummy:Yes </th>
   <th style="text-align:right;"> convenient:No </th>
   <th style="text-align:right;"> convenient:Yes </th>
   <th style="text-align:right;"> fattening:No </th>
   <th style="text-align:right;"> fattening:Yes </th>
   <th style="text-align:right;"> greasy:No </th>
   <th style="text-align:right;"> greasy:Yes </th>
   <th style="text-align:right;"> fast:No </th>
   <th style="text-align:right;"> fast:Yes </th>
   <th style="text-align:right;"> cheap:No </th>
   <th style="text-align:right;"> cheap:Yes </th>
   <th style="text-align:right;"> tasty:No </th>
   <th style="text-align:right;"> tasty:Yes </th>
   <th style="text-align:right;"> expensive:No </th>
   <th style="text-align:right;"> expensive:Yes </th>
   <th style="text-align:right;"> healthy:No </th>
   <th style="text-align:right;"> healthy:Yes </th>
   <th style="text-align:right;"> disgusting:No </th>
   <th style="text-align:right;"> disgusting:Yes </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> spicy:No </td>
   <td style="text-align:right;"> 0.45 </td>
   <td style="text-align:right;"> 0.55 </td>
   <td style="text-align:right;"> 0.09 </td>
   <td style="text-align:right;"> 0.91 </td>
   <td style="text-align:right;"> 0.13 </td>
   <td style="text-align:right;"> 0.87 </td>
   <td style="text-align:right;"> 0.48 </td>
   <td style="text-align:right;"> 0.52 </td>
   <td style="text-align:right;"> 0.10 </td>
   <td style="text-align:right;"> 0.90 </td>
   <td style="text-align:right;"> 0.40 </td>
   <td style="text-align:right;"> 0.60 </td>
   <td style="text-align:right;"> 0.37 </td>
   <td style="text-align:right;"> 0.63 </td>
   <td style="text-align:right;"> 0.65 </td>
   <td style="text-align:right;"> 0.35 </td>
   <td style="text-align:right;"> 0.81 </td>
   <td style="text-align:right;"> 0.19 </td>
   <td style="text-align:right;"> 0.76 </td>
   <td style="text-align:right;"> 0.24 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> spicy:Yes </td>
   <td style="text-align:right;"> 0.43 </td>
   <td style="text-align:right;"> 0.57 </td>
   <td style="text-align:right;"> 0.07 </td>
   <td style="text-align:right;"> 0.93 </td>
   <td style="text-align:right;"> 0.18 </td>
   <td style="text-align:right;"> 0.82 </td>
   <td style="text-align:right;"> 0.39 </td>
   <td style="text-align:right;"> 0.61 </td>
   <td style="text-align:right;"> 0.08 </td>
   <td style="text-align:right;"> 0.92 </td>
   <td style="text-align:right;"> 0.38 </td>
   <td style="text-align:right;"> 0.62 </td>
   <td style="text-align:right;"> 0.26 </td>
   <td style="text-align:right;"> 0.74 </td>
   <td style="text-align:right;"> 0.57 </td>
   <td style="text-align:right;"> 0.43 </td>
   <td style="text-align:right;"> 0.67 </td>
   <td style="text-align:right;"> 0.33 </td>
   <td style="text-align:right;"> 0.71 </td>
   <td style="text-align:right;"> 0.29 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>We can calculate the <strong>total variation distance</strong> between the conditional relative frequencies per variable. By adding these distances and dividing by the the number of variables minus one, we get:</p>
<p><span class="math inline">\(d(r_1, r_2) = \frac{1}{2 (p-1)} \sum_{j=1}^{p-1} \left| r_{1j} - r_{2j} \right| = ... \approx 0.06\)</span></p>
</div>
</section>
<section class="slide level2">

<h4 id="dissimilarity-measures-for-categorical-data-6">(Dis)similarity measures for categorical data</h4>
<div style="font-size: 0.6em">
<div class="cell">
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> yummy </th>
   <th style="text-align:left;"> convenient </th>
   <th style="text-align:left;"> spicy </th>
   <th style="text-align:left;"> fattening </th>
   <th style="text-align:left;"> greasy </th>
   <th style="text-align:left;"> fast </th>
   <th style="text-align:left;"> cheap </th>
   <th style="text-align:left;"> tasty </th>
   <th style="text-align:left;"> expensive </th>
   <th style="text-align:left;"> healthy </th>
   <th style="text-align:left;"> disgusting </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> No </td>
  </tr>
  <tr>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> Yes </td>
   <td style="text-align:left;"> No </td>
  </tr>
</tbody>
</table>

</div>
</div>
<ul>
<li>Consider the conditional relative frequencies of ‘convenient:Yes’ and ‘convenient:No’.</li>
</ul>
<div class="cell">
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;">   </th>
   <th style="text-align:right;"> yummy:No </th>
   <th style="text-align:right;"> yummy:Yes </th>
   <th style="text-align:right;"> spicy:No </th>
   <th style="text-align:right;"> spicy:Yes </th>
   <th style="text-align:right;"> fattening:No </th>
   <th style="text-align:right;"> fattening:Yes </th>
   <th style="text-align:right;"> greasy:No </th>
   <th style="text-align:right;"> greasy:Yes </th>
   <th style="text-align:right;"> fast:No </th>
   <th style="text-align:right;"> fast:Yes </th>
   <th style="text-align:right;"> cheap:No </th>
   <th style="text-align:right;"> cheap:Yes </th>
   <th style="text-align:right;"> tasty:No </th>
   <th style="text-align:right;"> tasty:Yes </th>
   <th style="text-align:right;"> expensive:No </th>
   <th style="text-align:right;"> expensive:Yes </th>
   <th style="text-align:right;"> healthy:No </th>
   <th style="text-align:right;"> healthy:Yes </th>
   <th style="text-align:right;"> disgusting:No </th>
   <th style="text-align:right;"> disgusting:Yes </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> convenient:No </td>
   <td style="text-align:right;"> 0.84 </td>
   <td style="text-align:right;"> 0.16 </td>
   <td style="text-align:right;"> 0.93 </td>
   <td style="text-align:right;"> 0.07 </td>
   <td style="text-align:right;"> 0.17 </td>
   <td style="text-align:right;"> 0.83 </td>
   <td style="text-align:right;"> 0.31 </td>
   <td style="text-align:right;"> 0.69 </td>
   <td style="text-align:right;"> 0.33 </td>
   <td style="text-align:right;"> 0.67 </td>
   <td style="text-align:right;"> 0.63 </td>
   <td style="text-align:right;"> 0.37 </td>
   <td style="text-align:right;"> 0.79 </td>
   <td style="text-align:right;"> 0.21 </td>
   <td style="text-align:right;"> 0.40 </td>
   <td style="text-align:right;"> 0.60 </td>
   <td style="text-align:right;"> 0.93 </td>
   <td style="text-align:right;"> 0.07 </td>
   <td style="text-align:right;"> 0.3 </td>
   <td style="text-align:right;"> 0.7 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> convenient:Yes </td>
   <td style="text-align:right;"> 0.41 </td>
   <td style="text-align:right;"> 0.59 </td>
   <td style="text-align:right;"> 0.90 </td>
   <td style="text-align:right;"> 0.10 </td>
   <td style="text-align:right;"> 0.13 </td>
   <td style="text-align:right;"> 0.87 </td>
   <td style="text-align:right;"> 0.49 </td>
   <td style="text-align:right;"> 0.51 </td>
   <td style="text-align:right;"> 0.08 </td>
   <td style="text-align:right;"> 0.92 </td>
   <td style="text-align:right;"> 0.38 </td>
   <td style="text-align:right;"> 0.62 </td>
   <td style="text-align:right;"> 0.31 </td>
   <td style="text-align:right;"> 0.69 </td>
   <td style="text-align:right;"> 0.67 </td>
   <td style="text-align:right;"> 0.33 </td>
   <td style="text-align:right;"> 0.79 </td>
   <td style="text-align:right;"> 0.21 </td>
   <td style="text-align:right;"> 0.8 </td>
   <td style="text-align:right;"> 0.2 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p>Total Variation Distance:</p>
<p><span class="math inline">\(d(r_1, r_2) = \frac{1}{2(p-1)} \sum_{j=1}^{p-1} \left| r_{1j} - r_{2j} \right| = ... \approx 0.259\)</span></p>
</div>
</section>
<section class="slide level2">

<h4 id="pam-on-mcdonalds-using-the-tvd-distance">PAM on McDonald’s using the TVD distance</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Dissimilarity Matrix:"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>          [,1]      [,2]      [,3]      [,4]      [,5]      [,6]      [,7]
[1,] 0.0000000 0.4638300 0.6920814 0.6231944 0.4465866 0.5081271 0.7383878
[2,] 0.4638300 0.0000000 0.5509988 0.1593644 0.6802820 0.2744317 0.5046924
[3,] 0.6920814 0.5509988 0.0000000 0.7103632 0.5642236 0.8254305 0.2764410
[4,] 0.6231944 0.1593644 0.7103632 0.0000000 0.5209176 0.1150673 0.6640568
[5,] 0.4465866 0.6802820 0.5642236 0.5209176 0.0000000 0.6359849 0.8406646
[6,] 0.5081271 0.2744317 0.8254305 0.1150673 0.6359849 0.0000000 0.5489895
[7,] 0.7383878 0.5046924 0.2764410 0.6640568 0.8406646 0.5489895 0.0000000</code></pre>
</div>
</div>
<div style="font-size: 0.6em">
<p>Apply PAM on the <span class="math inline">\(1453 \times 1453\)</span> dissimilarity matrix.</p>
</div>
</section>
<section class="slide level2">

<!-- #### Dimensionality reduction prior to clustering -->
<!-- ::: {style="font-size: 0.5em"} -->
<!-- **Perceptual map**: which attributes tend to be rated in the same way (CA on McDonalds). -->
<!-- ```{r mcdonalds-kab1} -->
<!-- #| echo: false -->
<!-- library(MSA) -->
<!-- data(mcdonalds) -->
<!-- library(FactoMineR) -->
<!-- plot(CA(data.matrix(mcdonalds[,1:11]),graph=FALSE),invisible="row") -->
<!-- ``` -->
<!-- <!-- Results from CA indicate that the first two components capture about 53% of the information contained in the segmentation variables. -->
<!-- - The first axis opposes positive with negative perceptions: (FAST, CONVENIENT, HEALTHY, TASTY and YUMMY) vs (FATTENING, -->
<!-- DISGUSTING and GREASY). -->
<!-- - The second axis captures the price dimension (CHEAP vs EXPENSIVE).  -->
<!-- ::: -->
<!-- --- -->
<!-- #### Dimensionality reduction prior to clustering -->
<!-- ::: {style="font-size: 0.5em"} -->
<!-- **Perceptual map**: which attributes tend to be rated in the same way (CA on McDonalds). -->
<!-- ```{r mcdonalds-kab2} -->
<!-- #| echo: false -->
<!-- library(MSA) -->
<!-- data(mcdonalds) -->
<!-- library(FactoMineR) -->
<!-- plot(CA(data.matrix(mcdonalds[,1:11]),graph=FALSE)) -->
<!-- ``` -->
<!-- - The first (horizontal) axis opposes positive with negative perceptions: (FAST, CONVENIENT, HEALTHY, TASTY and YUMMY) vs (FATTENING, -->
<!-- DISGUSTING and GREASY). -->
<!-- - The second (vertical) axis captures the price dimension (CHEAP vs EXPENSIVE).   -->
<!-- ::: -->
<!-- --- -->
<h4 id="pam-on-mcdonalds-using-tvd-distance">PAM on McDonald’s using TVD distance</h4>
<div style="font-size: 0.5em">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Napola_files/figure-revealjs/mcdonalds-kab3-1.png" width="960"></p>
</div>
</div>
<ul>
<li><p><strong>Cluster 1</strong> views McDonald’s as disgusting, greasy and expensive.</p></li>
<li><p>Members of <strong>Cluster 2</strong> believe that McDonald’s food is tasty, yummy and cheap.</p></li>
<li><p><strong>Cluster 3</strong> share the view that McDonald’s is yummy, tasty and at least to some extent healthy, but expensive.</p></li>
<li><p><strong>Cluster 4</strong> thinks McDonald’s is cheap and disgusting.</p></li>
</ul>
</div>
</section>
<section class="slide level2">

<h4 id="association-with-external-variables">Association with external variables</h4>
<div style="font-size: 0.6em">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Napola_files/figure-revealjs/mcdonalds-kab333-1.png" width="960"></p>
</div>
</div>
<p>The frequency of visiting McDonald’s is plotted along the x-axis. The extent of liking or hating McDonald’s is plotted along the y-axis. The bubble size represents the percentage of female consumers.</p>
</div>
</section>
<section class="slide level2">

<h4 id="association-with-external-variables-1">Association with external variables</h4>
<div style="font-size: 0.6em">
<div class="cell">
<div class="cell-output-display">
<p><img data-src="Napola_files/figure-revealjs/mcdonalds-kab3333-1.png" width="960"></p>
</div>
</div>
<p>Customer age is plotted along the x-axis. The extent of liking or hating McDonald’s is plotted along the y-axis. The bubble size represents the percentage of female consumers.</p>
</div>
</section>
<section class="slide level2">

<h4 id="latent-class-analysis-lca">Latent Class Analysis (LCA)</h4>
<div style="font-size: 0.5em">
<!-- Uses a multinomial distribution for each latent class. -->
<!-- Aim to maximize the likelihood of the observed data given the model parameters. -->
<!-- Conditional independence is a statistical concept that describes the relationship between three or more variables. In the context of LCA, the conditional independence assumption means that, given the latent class C, the observed variables are assumed to be independent of each other. -->
<p>The likelihood function <span class="math inline">\(L(\pi, \theta | X)\)</span> for LCA can be defined as a sum over <span class="math inline">\(K\)</span> latent classes:</p>
<p><span class="math display">\[L(\pi, \theta | X) = \sum_{i=1}^{K} \pi_i \prod_{j=1}^{n} \theta_{ij}^{x_j} (1-\theta_{ij})^{(1-x_j)}\]</span> where <span class="math inline">\(\pi_i\)</span> is the probability of belonging to latent class <span class="math inline">\(i\)</span>, and <span class="math inline">\(\theta_{ij}\)</span> is the probability of observing <span class="math inline">\(x_j = 1\)</span> given latent class <span class="math inline">\(i\)</span>.</p>
<p>Parameters <span class="math inline">\(\pi_i, \theta_{ij}\)</span> can be estimated using the Expectation-Maximization (EM) algorithm. The EM algorithm iteratively performs the following two steps:</p>
<p><strong>E-Step (Expectation)</strong>: Compute the “posterior probabilities” <span class="math inline">\(P(C_i | X_n)\)</span> which indicate the probability that data point <span class="math inline">\(n\)</span> belongs to latent class <span class="math inline">\(i\)</span>:</p>
<p><span class="math display">\[P(C_i | X_n) = \frac{\pi_i \prod_{j=1}^{n} \theta_{ij}^{x_j} (1-\theta_{ij})^{(1-x_j)}}{\sum_{k=1}^{K} \pi_k \prod_{j=1}^{n} \theta_{kj}^{x_j} (1-\theta_{kj})^{(1-x_j)}}\]</span></p>
<p><strong>M-Step (Maximization)</strong>: Update the parameters <span class="math inline">\(\pi_i, \theta_{ij}\)</span> to maximize the expected log-likelihood:</p>
<p><span class="math display">\[\pi_i = \frac{1}{N} \sum_{n=1}^{N} P(C_i | X_n)\]</span></p>
<p><span class="math display">\[\theta_{ij} = \frac{\sum_{n=1}^{N} P(C_i | X_n) x_{nj}}{\sum_{n=1}^{N} P(C_i | X_n)}\]</span></p>
</div>
</section>
<section class="slide level2">

<h4 id="lca-on-mcdonalds">LCA on McDonald’s</h4>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>   lca
pam   1   2   3   4
  1 173  58  11  36
  2  19 502  65   0
  3   0  32 275   0
  4  89   0  28 165</code></pre>
</div>

</div>
<img data-src="Napola_files/figure-revealjs/mcdonalds-kab4444-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<!-- #### Designing the marketing mix -->
<!-- ::: {style="font-size: 0.6em"} -->
<!-- Taking the example of McDonald's targeting a specific customer segment (Segment 3: customers who find McDonald's expensive but tasty), the strategy could involve introducing a MCSUPERBUDGET line. This line would have lower pricing to meet the price sensitivity of this segment. -->
<!-- The benefit of this approach is twofold: -->
<!-- - It could attract and retain customers from this segment. -->
<!-- - As these customers mature and become less price-sensitive, they may transition to McDonald's regular product line, increasing their lifetime value to the company. -->
<!-- - To protect the main product line from cannibalization, the MCSUPERBUDGET line would feature distinct product characteristics. In terms of promotion, communication channels popular among Segment 3 would be chosen to announce this new line. -->
<!-- - As for distribution (Place), the products would still be sold in existing McDonald's outlets, but with a potential twist. A separate MCSUPERBUDGET lane could be introduced, perhaps with a slightly longer waiting time, to discourage customers from switching away from the main product line. -->
<!-- ::: --- -->
<h4 id="real-data-is-messy-clustering-aibnb-listings-in-naples">Real data is messy: Clustering Aibnb listings in Naples</h4>
<div class="cell">

</div>
<div style="font-size: 0.5em">
<div class="cell">
<div class="cell-output-display">

<table class="table" style="width: auto !important; margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:right;"> id </th>
   <th style="text-align:left;"> property_type </th>
   <th style="text-align:left;"> neighbourhood_cleansed </th>
   <th style="text-align:right;"> accommodates </th>
   <th style="text-align:right;"> beds </th>
   <th style="text-align:left;"> price </th>
   <th style="text-align:right;"> review_scores_rating </th>
   <th style="text-align:right;"> number_of_reviews </th>
   <th style="text-align:left;"> host_is_superhost </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:right;"> 30466 </td>
   <td style="text-align:left;"> Private room in bed and breakfast </td>
   <td style="text-align:left;"> San Lorenzo </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> $70.00 </td>
   <td style="text-align:right;"> 5.00 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;">  </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 30536 </td>
   <td style="text-align:left;"> Private room in condo </td>
   <td style="text-align:left;"> San Lorenzo </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> $69.00 </td>
   <td style="text-align:right;"> 4.74 </td>
   <td style="text-align:right;"> 20 </td>
   <td style="text-align:left;">  </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 63413 </td>
   <td style="text-align:left;"> Entire rental unit </td>
   <td style="text-align:left;"> Chiaia </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> $61.00 </td>
   <td style="text-align:right;"> 4.68 </td>
   <td style="text-align:right;"> 92 </td>
   <td style="text-align:left;"> f </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 74364 </td>
   <td style="text-align:left;"> Entire rental unit </td>
   <td style="text-align:left;"> San Giuseppe </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> $69.00 </td>
   <td style="text-align:right;"> 4.91 </td>
   <td style="text-align:right;"> 232 </td>
   <td style="text-align:left;"> t </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 76993 </td>
   <td style="text-align:left;"> Private room in condo </td>
   <td style="text-align:left;"> Vomero </td>
   <td style="text-align:right;"> 4 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> $69.00 </td>
   <td style="text-align:right;"> 5.00 </td>
   <td style="text-align:right;"> 23 </td>
   <td style="text-align:left;">  </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 77009 </td>
   <td style="text-align:left;"> Private room in rental unit </td>
   <td style="text-align:left;"> Vomero </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:right;"> 1 </td>
   <td style="text-align:left;"> $44.00 </td>
   <td style="text-align:right;"> 4.85 </td>
   <td style="text-align:right;"> 136 </td>
   <td style="text-align:left;">  </td>
  </tr>
  <tr>
   <td style="text-align:right;"> 77010 </td>
   <td style="text-align:left;"> Private room in condo </td>
   <td style="text-align:left;"> Vomero </td>
   <td style="text-align:right;"> 3 </td>
   <td style="text-align:right;"> 2 </td>
   <td style="text-align:left;"> $43.00 </td>
   <td style="text-align:right;"> 4.75 </td>
   <td style="text-align:right;"> 85 </td>
   <td style="text-align:left;">  </td>
  </tr>
</tbody>
</table>

</div>
</div>
</div>
<div style="font-size: 0.6em">
<p><strong>Data analytic aim</strong>: Clustering of Airbnb listings to gain valuable insights into the characteristics and trends of different rental properties.</p>
</div>
</section>
<section class="slide level2">

<h4 id="airbnb-listings-data-exploration">Airbnb listings: Data exploration</h4>

<img data-src="Napola_files/figure-revealjs/eeee-1.png" width="960" class="r-stretch"></section>
<section class="slide level2">

<!-- #### Airbnb listings: Data exploration -->
<!-- ```{r myeee} -->
<!-- for(i in 1:nrow(nb_geo@data)){ -->
<!--   if(is.na(nb_geo@data[i, "avg_night_price"]) == TRUE){ -->
<!--     nb_geo@data[i, 3] <- mean(nb_geo@data[complete.cases(nb_geo@data), 3]) -->
<!--   } else if(is.na(nb_geo@data[i, "avg_night_price"]) == FALSE){ -->
<!--   } -->
<!-- } -->
<!-- pal <- colorNumeric( -->
<!--   palette = "YlGnBu", -->
<!--   domain = nb_geo@data$avg_night_price -->
<!-- ) -->
<!-- price_per_neighbourhood <- leaflet(nb_geo) %>% -->
<!--   addTiles() %>% setView(lng = 14.305573, lat = 40.853294, zoom = 11.5) %>% -->
<!--   addPolygons(stroke = TRUE, fillColor = ~ pal(avg_night_price), fillOpacity = 0.8, -->
<!--               highlight = highlightOptions(weight = 2, -->
<!--                                            color = ~ pal(avg_night_price),  -->
<!--                                            fillOpacity = 1, -->
<!--                                            bringToFront = TRUE), -->
<!--               label = ~neighbourhood, -->
<!--               smoothFactor = 0.2, -->
<!--               popup = ~ paste(paste(neighbourhood,":"), "<br/>","<b/>", paste("Avg Night Price: ", "$", round(avg_night_price)))) %>% -->
<!--   addLegend("bottomright", pal = pal, values = ~avg_night_price, opacity = 1.0,  -->
<!--             title = "Average Airbnb Night Price", -->
<!--             labFormat = labelFormat(prefix = "$"), na.label="") -->
<!-- price_per_neighbourhood -->
<!-- ``` -->
</section>
<section class="slide level2">

<h4 id="gowers-general-formula-for-dissimilarity">Gower’s general formula for dissimilarity</h4>
<div style="font-size: 0.6em">
<p>Gower’s general similarity measure is a composite measure that incorporates both categorical and continuous variables:</p>
<p><span class="math display">\[s_{ij} = \frac{\sum_{k=1}^{p} w_{ijk} s_{ijk}}{\sum_{k=1}^{p} w_{ijk}}\]</span> where <span class="math inline">\(s_{ijk}\)</span> is the similarity between the <span class="math inline">\(i^{th}\)</span> and <span class="math inline">\(j^{th}\)</span> individual as measured by the <span class="math inline">\(k^{th}\)</span> variable. The value of <span class="math inline">\(w_{ijk}\)</span> is set to zero if the outcome of the <span class="math inline">\(k^{th}\)</span> variable is missing for either or both individuals <span class="math inline">\(i\)</span> and <span class="math inline">\(j\)</span>.</p>
<div class="fragment">
<p>For <strong>binary or categorical</strong> variables, <span class="math inline">\(s_{ijk}\)</span> is 1 if both individuals have the same value, and 0 otherwise (<strong>Simple Matching</strong>).</p>
<p>For <strong>continuous</strong> variables, Gower suggests using the following similarity measure:</p>
<p><span class="math display">\[s_{ij} = 1 - \frac{|x_{ik} - x_{jk}|}{R_k}\]</span></p>
<p>Here, <span class="math inline">\(R_k\)</span> is the range of observations for the <span class="math inline">\(k^{th}\)</span> variable. In essence, the <strong>Manhattan distance</strong> is employed after scaling the <span class="math inline">\(k^{th}\)</span> variable to unit range. This normalization ensures that the contribution of each continuous variable to the overall dissimilarity is on a similar scale.</p>
<p>The Gower’s dissimilarity is simply <span class="math inline">\(1 - s_{ij}\)</span>, which will provide a measure of how different two individuals are based on the selected features.</p>
</div>
</div>
</section>
<section class="slide level2">

<h4 id="k-prototypes">K-prototypes</h4>
<div style="font-size: 0.6em">
<p>K-prototypes (Huang, 1998) is an <strong>extension of K-Means</strong>, designed to handle datasets with a mix of categorical and numerical attributes.</p>
<p><strong>Definition of Dissimilarity:</strong></p>
<p><span class="math display">\[d(x_i, Q_k) = d_{\text{con}}(x_i, Q_k) + w_l d_{\text{cat}}(x_i, Q_k)
    = \color{red}{\sum_{c=1}^{m} (x_{ic} - q_{kc})^2} + \color{blue}{w_k \sum_{t=m+1}^{p} \delta(x_{it}, q_{kt})},\]</span> where <span class="math inline">\(d_{\text{con}}\)</span> and <span class="math inline">\(d_{\text{cat}}\)</span> are the <span style="color:red">squared Euclidean distance</span> for the <span class="math inline">\(m\)</span> continuous and the <span style="color:blue">Simple Matching distance</span> for the <span class="math inline">\(p\)</span> categorical variables, respectively and <span class="math inline">\(w_k\)</span> is a user-defined weight for the significance of the categorical variables in cluster <span class="math inline">\(k\)</span>.</p>
<p>A commonly used value for <span class="math inline">\(w_k\)</span> is the ratio of average numeric variance to average categorical variance. The ratio serves as a normalization factor that aligns the impact of numeric and categorical variables on the clustering algorithm.</p>
</div>
</section>
<section class="slide level2">

<h4 id="k-means-for-mixed-data">K-means for mixed data</h4>
<div style="font-size: 0.6em">
<p>Mixed K-means (Ahmad &amp; Dey, 2007) is an extension of K-Means, designed to handle datasets with a mix of categorical and numerical attributes.</p>
<p><strong>Definition of Dissimilarity:</strong></p>
<p><span class="math display">\[d(x_i, Q_k) = d_{\text{con}}(x_i, Q_k) + d_{\text{cat}}(x_i, Q_k)
    = \color{red}{\sum_{c=1}^{m} (x_{ij} - q_{kc})^2} + \color{blue}{\sum_{t=m+1}^{p} d(x_{ij}, q_{kt})}\]</span> where <span class="math inline">\(d_{\text{con}}\)</span> and <span class="math inline">\(d_{\text{cat}}\)</span> are the <span style="color:red">squared Euclidean distance</span> for the continuous and the <span style="color:blue">Total Variation Distance</span> for the categorical variables, respectively.</p>
</div>
</section>
<section class="slide level2">

<h4 id="knowledge-check-1">Knowledge Check</h4>
<div style="font-size: 0.6em">
<p><strong>Question:</strong> What are the challenges of distance-based methods when clustering mixed-type data? (True/False)</p>
<div class="fragment">
<ul>
<li>Without proper scaling or normalization, continuous variables may dominate the distance computation, making categorical variables less influential in clustering.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>Variable weighting is often essential, as improper weighting can result in clusters that favor specific variables. This may lead to clusters that don’t accurately capture the inherent groupings within the data.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>The complex relationships between continuous and categorical variables can be hard to capture, potentially affecting cluster quality.</li>
</ul>
</div>
</div>
</section>
<section class="slide level2">

<!-- #### Model-based clustering for mixed data -->
<!-- ::: {style="font-size: 0.6em"} -->
<!-- :::fragment -->
<!-- #### ClustMD (McParland & Gormley, 2016) -->
<!-- **Continuous Variables:** For continuous variables, ClustMD generally assumes that the data within each cluster are Gaussian-distributed, though other distributions can also be specified. -->
<!-- **Categorical Variables:** The categorical variables are generally modeled using a multinomial distribution within each cluster. -->
<!-- **Mixing Proportions:** Similar to GMM, ClustMD also uses mixing proportions to indicate the likelihood of a data point belonging to a particular cluster. -->
<!-- **Joint Distribution:** The model creates a joint distribution of continuous and categorical data, parameterized by the cluster-specific parameters and mixing proportions. -->
<!-- **Parameter Estimation:** The EM algorithm is used to estimate the parameters of this joint distribution. -->
<!-- ::: -->
<!-- ::: -->
<!-- #### Two-Step Clustering -->
<!-- ::: {style="font-size: 0.6em"} -->
<!-- Two-Step Clustering is a hybrid clustering technique often used to handle large data sets or data sets with a mix of categorical and continuous variables. It combines aspects of hierarchical clustering and partitioning methods like k-means. This approach aims to minimize the computational cost associated with hierarchical methods while retaining the ability to find naturally occurring clusters, thus offering a balance between computational efficiency and clustering accuracy. -->
<!-- Step 1: Pre-clustering (Formation of Mini-clusters) -->
<!-- Initialization: Initially, each data point is treated as a mini-cluster, effectively turning the entire data set into a large number of single-point clusters. -->
<!-- Scan and Merge: The algorithm scans through the dataset to identify similar mini-clusters based on a distance measure, which can be log-likelihood distance, Euclidean distance, or other metrics. Similar mini-clusters are then merged to form new, larger mini-clusters. -->
<!-- Iterative Process: This scanning and merging process is performed iteratively until all data points are grouped into a set of mini-clusters. These are not the final clusters but serve as an intermediate step. -->
<!-- Objective: The primary aim of this step is to drastically reduce the size of the dataset by transforming it into a set of mini-clusters, thereby making the next step computationally less expensive. -->
<!-- Step 2: Agglomerative Hierarchical Clustering -->
<!-- Initialization: The mini-clusters formed in Step 1 are taken as the initial clusters. -->
<!-- Distance Matrix Computation: A distance matrix between all pairs of mini-clusters is computed using the chosen distance metric. Again, this could be log-likelihood distance, Euclidean distance, or others. -->

<!-- Agglomerative Merging: Similar to hierarchical clustering, the two closest (least dissimilar) mini-clusters are merged to form a new, larger cluster. This is repeated until a stopping criterion is met, such as reaching a predefined number of clusters or an acceptable level of cluster quality. -->
<!-- Objective: To find a hierarchical organization of the mini-clusters formed in Step 1, culminating in a set of final clusters that are as homogeneous as possible. -->
<!-- Benefits and Applications -->
<!-- Scalability: Because the first step reduces the dataset size, the method is more scalable than traditional hierarchical clustering. -->
<!-- Versatility: It can handle a mix of continuous and categorical variables, especially when using metrics like log-likelihood distance. -->
<!-- Interpretability: The hierarchical nature of the second step provides insights into the nested structure of clusters, which can be useful for understanding complex data sets. -->
<h4 id="similarity-between-clusterings">Similarity between clusterings</h4>
<div style="font-size: 0.6em">
<p><strong>Rand Index:</strong> Measures the similarity between two data clusterings. It is calculated as the number of pairs of objects that are either in the same group in both partitions or in different groups in both partitions, divided by the total number of pairs of objects.</p>
<p>Let <span class="math inline">\(C_1 = \{C_{11}, \ldots, C_{1K_1}\}\)</span> and <span class="math inline">\(C_2 = \{C_{21}, \ldots, C_{2K_2}\}\)</span> be partitions of a dataset <span class="math inline">\(D\)</span> with <span class="math inline">\(|D| = n\)</span>. For every pair of points <span class="math inline">\(x, y \in D\)</span> and <span class="math inline">\(j = 1, 2,\)</span> define:</p>
<p><span class="math display">\[R(C_1,C_2) = \frac{1}{\binom{n}{2}} \sum_{x, y \in D} 1(i_1(x, y) = i_2(x, y)).\]</span></p>
<p>Unfortunately, the interpretation of values of <span class="math inline">\(R\)</span> depends on the numbers and sizes of clusters in the two clusterings. Two random clusterings with large <span class="math inline">\(K_1\)</span>, <span class="math inline">\(K_2\)</span> can be expected to have a rather high value of <span class="math inline">\(R\)</span>.</p>
<div class="fragment">
<p><strong>Adjusted Rand Index:</strong> An extension of the Rand Index that adjusts for chance (Hubert and Arabie, 1985). It takes into account the fact that random partitions may have a non-zero Rand Index. The ARI can take values between −1 and 1. It takes value 1 if and only if the clusterings are identical, and 0 is its expected value for two independent random clusterings.</p>
<p><span class="math display">\[ARI = \frac{R(C_1, C_2) - E_R}{1 - E_R}\]</span> where <span class="math inline">\(E_R\)</span> is the expected value of <span class="math inline">\(R\)</span> assuming that points are randomly assigned to clusters in such a way that numbers and sizes of clusters in <span class="math inline">\(C_1\)</span>, <span class="math inline">\(C_2\)</span> are held constant.</p>
</div>
</div>
</section>
<section class="slide level2">

<h4 id="aspects-of-cluster-validity">Aspects of Cluster Validity</h4>
<div style="font-size: 0.7em">
<div class="fragment">
<p><strong>Internal validation</strong>: Measures how well the clustering fits the data using specific indices like the Average Silhouette Width or the Calinski–Harabasz index. These indices often use the data’s proximity structure to evaluate the quality of clusters.</p>
</div>
<div class="fragment">
<p><strong>External validation</strong>: Uses independent, external data or variables to evaluate the clustering solution’s quality and relevance. This can involve checking if the clusters are predictive of or associated with external variables.</p>
</div>
<div class="fragment">
<p><strong>Stability</strong>: Checks if the clustering method produces similar results across multiple datasets from the same distribution. This is often done by generating multiple datasets through techniques like drawing subsamples or bootstrapping.</p>
</div>
<div class="fragment">
<p><strong>Visual validation</strong>: Relies on visual inspection to confirm the validity of clusters. This can be based on clearly visible patterns in the data or the validity of assumptions required for the chosen clustering method.</p>
</div>
</div>
</section>
<section class="slide level2">

<h4 id="assessing-cluster-quality-average-silhouette-width-asw">Assessing Cluster Quality: Average Silhouette Width (ASW)</h4>
<div style="font-size: 0.55em">
<h4 id="silhouette-score-definition-for-a-single-sample">Silhouette Score: Definition for a Single Sample</h4>
<p>The silhouette score measures how similar an object is to its own cluster compared to other clusters. The formula for the silhouette score <span class="math inline">\(s(i)\)</span> for a single sample <span class="math inline">\(i\)</span> is:</p>
<p><span class="math display">\[s(i) = \frac{b(i) - a(i)}{\max\{a(i), b(i)\}}\]</span></p>
<ul>
<li><p><span class="math inline">\(a(i)\)</span>: Average distance from the (i)-th sample to the other points in the same cluster.</p></li>
<li><p><span class="math inline">\(b(i)\)</span>: Smallest average distance from the <span class="math inline">\(i\)</span>-th sample to points in a different cluster.</p></li>
</ul>
<h4 id="average-silhouette-width-asw">Average Silhouette Width (ASW)</h4>
<p>The Average Silhouette Width is the average of the silhouette scores across all data points:</p>
<p><span class="math display">\[\text{ASW} = \frac{1}{N} \sum_{i=1}^{N} s(i)\]</span> - <span class="math inline">\(N\)</span>: Total number of samples. - <span class="math inline">\(s(i)\)</span>: Silhouette score for the <span class="math inline">\(i\)</span>-th sample.</p>
<ul>
<li><strong>High ASW</strong>: Indicates that the objects are well matched to their own clusters and poorly matched to neighboring clusters.</li>
<li><strong>Low ASW</strong>: Indicates that some objects may be in the wrong clusters.</li>
</ul>
</div>
</section>
<section class="slide level2">

<h4 id="assessing-cluster-quality-calinski-harabasz-index">Assessing Cluster Quality: Calinski-Harabasz Index</h4>
<div style="font-size: 0.6em">
<p>The Calinski-Harabasz Index, also known as the Variance Ratio Criterion, is a metric used to assess the quality of clusters. A higher value indicates better clustering.</p>
<p><span class="math display">\[\text{CH Index} = \frac{\text{Between-cluster dispersion}}{\text{Within-cluster dispersion}} \times \frac{N - K}{K - 1}\]</span></p>
<ul>
<li><p><span class="math inline">\(N\)</span>: Total number of samples</p></li>
<li><p><span class="math inline">\(K\)</span>: Number of clusters</p></li>
<li><p><strong>High CH Index</strong>: Indicates that the clusters are dense and well-separated.</p></li>
<li><p><strong>Low CH Index</strong>: Suggests that the clusters have high overlap or are not dense enough.</p></li>
</ul>
</div>
</section>
<section class="slide level2">

<h4 id="a-validation-framework">A validation framework</h4>
<div style="font-size: 0.55em">
<div class="fragment">
<p><strong>Validation dataset</strong>: a dataset composed of independently collected data (e.g., collected by other researchers or in a different laboratory) which is similar enough to the original data for cluster evaluation to be possible. In practice, however, genuinely independent data is often not available. In this case, one might split a single dataset into a discovery and a validation set.</p>
</div>
<div class="fragment">
<p><strong>Step 1.</strong> Using the original dataset or a part of it a single clustering method is selected, for example, via its performance with respect to internal/external validation indices.</p>
</div>
<div class="fragment">
<p><strong>Step 2.</strong> Important aspects of the clustering resulting from this method are validated on another dataset or the rest of the original dataset. The validation data should be completely hidden from the method selection process of Step 1.</p>
<p>For a review, see Ullmann et al.&nbsp;(2021)</p>
</div>
</div>
</section>
<section class="slide level2">

<h4 id="take-away-messages">Take Away Messages</h4>
<div style="font-size: 0.6em">
<ul>
<li><p>When conducting cluster analysis, researchers are confronted with an overwhelming number of existing methods and decisions. <em>Transparency</em> is the new objectivity.</p></li>
<li><p>In practice, cluster analysis is usually applied to real datasets for which the ‘true’ cluster labels of the data points are unknown. There might be more than one ‘true’ clustering solutions in a data set which can be even more interesting and useful.</p></li>
<li><p><em>Natural</em> clusters are rare. A more pragmatic objective is to seek clusters that demonstrate <em>reproducibility</em> across varying conditions or analyses.</p></li>
<li><p>The choice of (dis)similarity measure is more pivotal than the specific clustering algorithm.</p></li>
<li><p>The selection of a clustering algorithm frequently depends on the software implementations at hand, influencing not only academic discourse but also real-world applications and the rate of methodological adoption.</p></li>
</ul>
</div>
</section>
<section class="slide level2">

<h4 id="resources">Resources</h4>
<div style="font-size: 0.5em">
<p>Gelman, A., &amp; Hennig, C. (2017). Beyond subjective and objective in statistics. <em>Journal of the Royal Statistical Society Series A: Statistics in Society</em>, <em>180</em>(4), 967-1033.</p>
<p>Halkidi, M., Vazirgiannis, M., &amp; Hennig, C. (2015). Method-independent indices for cluster validation and estimating the number of clusters. In <em>Handbook of cluster analysis</em> (pp.&nbsp;616-639). Chapman and Hall/CRC.</p>
<p>Leisch, F., Dolnicar, S., &amp; Grün, B. (2018). <em>Market segmentation analysis: Understanding it, doing it, and making it useful.</em> Springer. <a href="https://link.springer.com/book/10.1007/978-981-10-8818-6"><strong>Download</strong></a></p>
<p>Šulc, Z., &amp; Řezanková, H. (2019). Comparison of similarity measures for categorical data in hierarchical clustering. <em>Journal of Classification</em>, <em>36</em>, 58-72. <a href="https://link.springer.com/article/10.1007/s00357-019-09317-5"><strong>Download</strong></a></p>
<p>Ullmann, T., Hennig, C., &amp; Boulesteix, A. L. (2022). Validation of cluster analysis results on validation data: A systematic framework. <em>Wiley Interdisciplinary Reviews: Data Mining and Knowledge Discovery</em>, <em>12</em>(3), e1444.</p>
<p>van de Velden, M., Iodice D’Enza, A., &amp; Markos, A. (2019). Distance‐based clustering of mixed data. <em>Wiley Interdisciplinary Reviews: Computational Statistics</em>, <em>11</em>(3), e1456.</p>
<h4 id="online-learning-materials">Online Learning Materials</h4>
<p>Clustering with Scikit with GIFs (Blogpost) <a href="%5Bhttps://dashee87.github.io/data%20science/general/Clustering-with-Scikit-with-GIFs/%5D"><strong>Link</strong></a></p>
<p>Visualizing K-means Clustering (Blogpost) <a href="https://www.naftaliharris.com/blog/visualizing-k-means-clustering/"><strong>Link</strong></a></p>
<p>Visualizing DBSCAN Clustering (Blogpost) <a href="https://www.naftaliharris.com/blog/visualizing-dbscan-clustering/"><strong>Link</strong></a></p>
<p>Hennig, C. (2016). <em>Lecture notes for STATG019 Selected Topics in Statistics: Cluster Analysis</em> <a href="http://www.homepages.ucl.ac.uk/~ucakche/presentations/g19lecnotes.pdf"><strong>Link</strong></a></p>
</div>
</section>
<section class="slide level2">

<p><br> <br></p>
<div style="text-align: center; font-size: 1.5em">
<div class="absolute" style="top: 5%; left: 33%; ">
<p><strong>Happy Clustering!</strong></p>
</div>
</div>
<p><br></p>
<div class="absolute" style="top: 30%; left: 25%; width: 60%; ">
<div class="box">
<div style="font-size: 1em">
<p><strong>Angelos MARKOS</strong><br> <i class="fa-brands fa-twitter"></i> <a href="https://twitter.com/amarkos"><span class="citation" data-cites="amarkos">@amarkos</span></a><br> <i class="fa-brands fa-github"></i> <a href="https://github.com/amarkos">amarkos</a><br> <i class="fa-solid fa-link"></i> <i class="fa-solid fa-envelope"></i> amarkos AT eled.duth.gr</p>
</div>
</div>
</div>
<p><br></p>
<div style="text-align: center; font-size: 0.5em">
<div class="absolute" style="top: 85%; left: 38%; ">
<p>slides made with <a href="https://quarto.org/">Quarto</a> <span class="emoji" data-emoji="tada">🎉</span></p>
</div>
</div>

<img src="corgi.png" class="slide-logo r-stretch"><div class="footer footer-default">

</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="Napola_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="Napola_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="Napola_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="Napola_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="Napola_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="Napola_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="Napola_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="Napola_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="Napola_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="Napola_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="Napola_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': true,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true,"boardmarkerWidth":5},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>